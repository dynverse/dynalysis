---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r setup, echo = FALSE}
knitr::opts_chunk$set(warning = FALSE, message = FALSE, error = FALSE, echo = FALSE)
```

```{r}
library(tidyverse)
library(dynbenchmark)
```

[![Build Status](https://api.travis-ci.org/dynverse/dynbenchmark.svg)](https://travis-ci.org/dynverse/dynbenchmark)
![Lifecycle](https://img.shields.io/badge/lifecycle-experimental-orange.svg) <img src="package/man/figures/logo.png" align="right" />

# Benchmarking trajectory inference methods

This repo contains the scripts to reproduce the manuscript

A comparison of single-cell trajectory inference methods: towards more accurate and robust tools  
Wouter Saelens\*, Robrecht Cannoodt\*, Helena Todorov, Yvan Saeys  
bioRxiv 276907; doi: https://doi.org/10.1101/276907


## Structure

This repository is structured as follows:

* data: raw data files required by the scripts
* derived: data files produced by the scripts
* figures: figures created by the scrips
* manuscript: source files for producing the manuscript
* package: an R package with helper functions
* results: data objects outputted by the scripts
* scripts: code required to reproduce the analyses of the benchmark

## Datasets

The benchmarking pipeline generates (and uses) the following datasets:

* **Gold standard single-cell datasets**, both real and synthetic, used to evaluated the trajectory inference methods [![DOI](https://zenodo.org/badge/DOI/10.5281/zenodo.1211533.svg)](https://doi.org/10.5281/zenodo.1211533)

```{r, echo = FALSE, message=FALSE}
set.seed(1)

datasets <- list_datasets() %>% group_by(dataset_source) %>% sample_n(1) %>% pull(dataset_id) %>% load_datasets()

datasets$plot_dimred <- mapdf(datasets, ~plot_dimred(., dimred = dyndimred::dimred_landmark_mds) + ggtitle(.$dataset_source) + theme(plot.title = element_text(size = 10)))
p <- patchwork::wrap_plots(datasets$plot_dimred, ncol = nrow(datasets))
ggplot2::ggsave("package/man/figures/datasets.png", width = nrow(datasets)*3, height = 1*3)
```

![datasets](package/man/figures/datasets.png)

* **The performance of methods** used in [dynguidelines](https://www.github.com/dynverse/dynguidelines). _Not yet available_

* **General information about trajectory inference methods**, available as a data frame in `dynmethods::methods`

## Scripts

The scripts folder contains all the scripts necessary to fully reproduce the benchmarking manuscript in chronologically ordered subfolders. Each subfolder contains a readme file with further explanations of the different scripts and what they do:

```{r}
scripts <- read_rds(derived_file("scripts.rds", experiment_id = "12-varia/01-scripts"))

scripts %>% filter(
  level == 1
) %>%
  arrange(ix) %>%
  mutate(
    name = str_glue("[{id}](https://github.com/dynverse/dynbenchmark/tree/master/{location})"),
    order = ifelse(is.na(ix), "", ix)
  ) %>% 
  select(order, subfolder = name, description = title) %>%
  knitr::kable()


```

## Benchmarking your own method

Explanation coming soon. Feel free to make an issue or send us an e-mail if you want your method to be included.
